"0","# Global forcibly displaced population during last ten years"
"0",""
"0",""
"0","fd_last_ten_years <- refugees::population %>%"
"0","  filter(year >= 2012 & year <= 2022) %>%"
"0","  summarise(refugees = sum(refugees, na.rm = TRUE),"
"0","            asylum_seekers = sum(asylum_seekers, na.rm = TRUE), "
"0","            oip = sum(oip, na.rm = TRUE), .by = year) %>%"
"0","  left_join(refugees::idmc %>%"
"0","              filter(year >= 2012 & year <= 2022) %>%"
"0","              summarise(idmc = sum(total, na.rm = TRUE), .by = year), by=c(""year"")) %>%"
"0","  left_join(refugees::unrwa %>%"
"0","              filter(year >= 2012 & year <= 2022) %>%"
"0","              summarise(unrwa = sum(total, na.rm = TRUE), .by = year), by=c(""year"")) %>%"
"0","  pivot_longer(cols = -year, names_to = ""population_type"", values_to = ""total"") %>% "
"0","  mutate(population_type=factor(population_type, levels=c(""oip"", ""unrwa"",""asylum_seekers"", ""refugees"",""idmc"")), "
"0","             population_type=recode(population_type,"
"0","             refugees=""Refugees under UNHCRâ€™s mandate"","
"0","             asylum_seekers=""Asylum-seekers"","
"0","             oip=""Other people in need of international protection"","
"0","             idmc=""Internally displaced persons"","
"0","             unrwa=""Palestine refugees under UNRWAâ€™s mandate"")) %>%"
"0","  arrange(year, population_type) %>%"
"0","  ggplot() +"
"0","  geom_area(aes(x = year, y = total, fill = population_type)) +"
"0","  # geom_text(aes(x = 2022, y = cumsum(total)-150000, label = population_type), check_overlap = TRUE) +"
"0","  scale_fill_unhcr_d(palette = ""pal_unhcr"") +"
"0","  labs(y = ""Number of people"", caption = ""Source: UNHCR Refugee Data Finder"") +"
"0","  scale_x_continuous(breaks = pretty_breaks(n = 10)) +"
"0","  scale_y_continuous(expand = expansion(c(0, 0.1)), breaks= pretty_breaks(n = 5), labels = label_number(scale_cut = cut_long_scale())) +  "
"0","  theme_unhcr(font_size = 15,"
"0","    grid = ""Y"","
"0","    axis = ""x"","
"0","    axis_title = ""y"") +"
"0","    scale_fill_manual(values = c(""#EF4A60"", ""#8EBEFF"", ""#18375F"",""#0072BC"", ""#00B398"")) +"
"0","guides(fill = guide_legend(nrow = 3, byrow = TRUE, reverse = TRUE)) "
"2","[38;5;232mScale for [32mfill[38;5;232m is already present.
Adding another scale for [32mfill[38;5;232m, which will replace the existing scale.[39m"
"0","  "
"0",""
"0","# final_last_ten_years <- ggplotly(fd_last_ten_years, tooltip=""fill"")"
"0","fd_last_ten_years"
