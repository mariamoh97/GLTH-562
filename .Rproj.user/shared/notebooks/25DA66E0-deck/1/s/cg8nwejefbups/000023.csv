"0",""
"0","# country_data"
"0","app_loc_data <- app_country_data %>%"
"0","            left_join(df_url, c(""coa_iso"" = ""iso3"")) %>%"
"0","            select(-gis_name, -ref)"
"0",""
"0","app_top10_refugees <- app_loc_data %>%"
"0","                  arrange(desc(app_total_refugees)) %>%"
"0","                  drop_na(lon)"
"0","# print(head(top10_refugees, 10))"
"0",""
"0","app_top10_asylum <- app_loc_data %>% "
"0","                arrange(desc(app_total_asylum)) %>%"
"0","                drop_na(lon)"
"0","# print(head(top10_asylum, 10))"
"0",""
"0","app_top10_oip <- app_loc_data %>%"
"0","              arrange(desc(app_total_oip)) %>%"
"0","              drop_na(lon)"
"0","# print(head(top10_idps, 10))"
"0","            "
"0",""
"0","poly_url <- ""https://raw.githubusercontent.com/GDS-ODSSS/unhcr-dataviz-platform/master/data/geospatial/world_polygons_simplified.json"""
"0","line_url <- ""https://raw.githubusercontent.com/GDS-ODSSS/unhcr-dataviz-platform/master/data/geospatial/world_lines_simplified.json"""
"0",""
"0","# Read and transform data for refugees"
"0","app_df_ref <- app_top10_refugees %>% "
"0","  st_as_sf(coords = c(""lon"", ""lat""),"
"0","           crs = 4326)"
"0",""
"0","app_poly <- read_sf(poly_url) %>%"
"0","  st_set_crs(4326)"
"0",""
"0","app_line <- read_sf(line_url) %>%"
"0","  mutate("
"0","    type = as_factor(type) %>%"
"0","      fct_relevel(""solid"", ""dashed"", ""dotted"", ""dashed-dot"")"
"0","  ) %>%"
"0","  st_set_crs(4326)"
"0",""
"0","# Read and transform data for asylum seekers"
"0","app_df_asy <- app_top10_asylum %>% "
"0","  st_as_sf(coords = c(""lon"", ""lat""),"
"0","           crs = 4326)"
"0",""
"0","# app_poly <- read_sf(poly_url) %>%"
"0","#   st_set_crs(4326)"
"0","# "
"0","# line <- read_sf(line_url) %>%"
"0","#   mutate("
"0","#     type = as_factor(type) %>%"
"0","#       fct_relevel(""solid"", ""dashed"", ""dotted"", ""dashed-dot"")"
"0","#   ) %>%"
"0","#   st_set_crs(4326)"
"0",""
"0","# Read and transform data for internally displaced persons"
"0","app_df_oip <- app_top10_oip %>% "
"0","  st_as_sf(coords = c(""lon"", ""lat""),"
"0","           crs = 4326)"
"0",""
"0","# poly <- read_sf(poly_url) %>%"
"0","#   st_set_crs(4326)"
"0","# "
"0","# line <- read_sf(line_url) %>%"
"0","#   mutate("
"0","#     type = as_factor(type) %>%"
"0","#       fct_relevel(""solid"", ""dashed"", ""dotted"", ""dashed-dot"")"
"0","#   ) %>%"
"0","#   st_set_crs(4326)"
"0",""
