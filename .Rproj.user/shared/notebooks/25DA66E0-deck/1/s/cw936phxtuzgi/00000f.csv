"0",""
"0","## Where Do Displaced People Seek Asylum?"
"0","# # Data URL"
"0","# df_url <- read_csv(""https://raw.githubusercontent.com/GDS-ODSSS/unhcr-dataviz-platform/master/data/geospatial/bubble_map.csv"")"
"0","# "
"0","# # print(refugees::flows %>% filter(year >= 2012 & year <=2022))"
"0","# app_country_data <- refugees::flows %>%"
"0","#                 filter(year >= 2012 & year <= 2022) %>%"
"0","#                 group_by(coa_name, coa_iso) %>%"
"0","#                 summarise(app_total_asylum = sum(asylum_seekers)) %>%"
"0","#                 ungroup()"
"0","# "
"0","# # print(app_country_data)"
"0","# "
"0","# # country_data"
"0","# app_loc_data <- app_country_data %>%"
"0","#             left_join(df_url, c(""coa_iso"" = ""iso3"")) %>%"
"0","#             select(-gis_name, -ref)"
"0","# "
"0","# "
"0","# app_top10_asylum <- app_loc_data %>% "
"0","#                 arrange(desc(app_total_asylum)) %>%"
"0","#                 drop_na(lon)"
"0","#             "
"0","# "
"0","# poly_url <- ""https://raw.githubusercontent.com/GDS-ODSSS/unhcr-dataviz-platform/master/data/geospatial/world_polygons_simplified.json"""
"0","# line_url <- ""https://raw.githubusercontent.com/GDS-ODSSS/unhcr-dataviz-platform/master/data/geospatial/world_lines_simplified.json"""
"0","# "
"0","# "
"0","# "
"0","# app_poly <- read_sf(poly_url) %>%"
"0","#   st_set_crs(4326)"
"0","# "
"0","# app_line <- read_sf(line_url) %>%"
"0","#   mutate("
"0","#     type = as_factor(type) %>%"
"0","#       fct_relevel(""solid"", ""dashed"", ""dotted"", ""dashed-dot"")"
"0","#   ) %>%"
"0","#   st_set_crs(4326)"
"0","# "
"0","# # Read and transform data for asylum seekers"
"0","# app_df_asy <- app_top10_asylum %>% "
"0","#   st_as_sf(coords = c(""lon"", ""lat""),"
"0","#            crs = 4326)"
"0","# "
"0","# ggplot() +"
"0","#   geom_sf(data = app_poly,"
"0","#           fill = unhcr_pal(n = 5, ""pal_grey"")[2],"
"0","#           color = ""transparent"") +"
"0","#   geom_sf(data = app_line,"
"0","#           aes(linetype = type),"
"0","#           color = ""white"","
"0","#           linewidth = .25,"
"0","#           show.legend = FALSE) +"
"0","#   geom_sf(data = app_df_asy,"
"0","#           aes(size = app_total_asylum),"
"0","#           shape = 21,"
"0","#           fill = unhcr_pal(n = 1, ""pal_blue""),"
"0","#           color = unhcr_pal(n = 5, ""pal_blue"")[5],"
"0","#           alpha = 0.3) +"
"0","#   scale_linetype_manual(values = c(1, 2, 3, 4)) +"
"0","#   scale_size_area(max_size = 12,"
"0","#                   labels = scales::label_number("
"0","#                     scale_cut = cut_short_scale()"
"0","#                   ),"
"0","#                   breaks = c(1e5, 1e6, 5e6)) +"
"0","#   # labs("
"0","#   #   title = ""Global refugee displacement by country of origin | Last Decade"","
"0","#   #   caption = ""The boundaries and names shown and the designations used on this map do not imply official endorsement or\nacceptance by the United Nations.\nSource: UNHCR Refugee Data Finder\nÂ© UNHCR, The UN Refugee Agency"""
"0","#   # ) +"
"0","#   coord_sf(crs = st_crs('ESRI:54030')) +"
"0","#   theme_unhcr(void = TRUE)"
"0",""
